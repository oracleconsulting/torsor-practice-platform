# TORSOR Practice Platform - Version History

## v1.2.0 - UI/UX Fixes Complete (October 11, 2025 - 23:00)

### üéâ Major Release: All UI Issues Resolved

**Data Migration Success:**
- 329 skill assessments successfully imported
- 3 team members (James, Luke, Jaanu) with full data
- 111 skills across 8 categories

**UI/UX Improvements:**
1. ‚úÖ Skills Matrix horizontal scrolling - all 111 skills accessible
2. ‚úÖ Gap Analysis scatter plot - clearer with top N filter (default 20)
3. ‚úÖ Team Metrics clarity - added explanations and formula details
4. ‚úÖ Category filter badges - prominent, clickable with skill counts
5. ‚úÖ Development Planning - verified working with real data
6. ‚úÖ Skills Analysis - verified working with real data

**Commits:**
- e671e4b: Skills Matrix scrolling fix
- 5977b2b: Gap Analysis improvements
- ff48147: Team Metrics clarity
- 9b54123: Category filter badges

**Files Modified:**
- src/components/accountancy/team/SkillsMatrix.tsx
- src/components/accountancy/team/GapAnalysis.tsx
- src/components/accountancy/team/TeamMetrics.tsx

---

## v1.1.1 - Data Migration Fix (October 11, 2025 - 22:00)

### üîß Critical Data Flow Fix

**Problem:**
- Frontend showing 0 assessments despite users completing them
- Assessment data stored in `invitations.assessment_data` (JSONB)
- Not flowing to `skill_assessments` table

**Solution:**
- Created `20251011_import_by_skill_order.sql` migration
- Matched assessments by position (due to UUID mismatch)
- Extracted JSONB data from invitations
- Populated `skill_assessments` with 329 records

**Result:** All assessment data now visible in UI! ‚úÖ

---

## v1.1.0 - Auto-Migration System (October 11, 2025 - 20:00)

### üöÄ Automated Database Migrations

**Implementation:**
- Created `scripts/apply-migrations.mjs`
- Reads SQL files from `supabase/migrations/`
- Tracks applied migrations in `_migrations` table
- Runs automatically via GitHub Actions on push to main
- Also runs on `npm install` via postinstall hook

**Configuration:**
- Uses Supabase connection pooler for CI/CD
- SSL configured with `rejectUnauthorized: false`
- Environment variable: `MIGRATION_STOP_ON_ERROR`
- Fixed `EBADPLATFORM` error with `optionalDependencies`

**Files Created:**
- scripts/apply-migrations.mjs
- .github/workflows/deploy.yml
- AUTO_MIGRATION_SUCCESS.md

---

## v1.0.9-debug - Data Flow Investigation (October 11, 2025 - 19:00)

### üîç Debugging Assessment Display Issue

**Problem:** Frontend showing 0 assessments
**Investigation:**
- Added extensive console logging to loadData
- Created diagnostic SQL scripts
- Created Node.js scripts for direct DB queries
- Discovered data in `invitations.assessment_data` not `skill_assessments`

**Tools Created:**
- check-data.mjs
- check-data-direct.sql
- run-check.mjs
- CHECK_ASSESSMENT_DATA.sql
- DATA_FLOW_INVESTIGATION.md

---

## v1.0.8 - New Features Complete (October 11, 2025 - 16:00)

### ‚ú® Four Major Features Implemented

1. **Mandatory Interest Level in Assessment**
   - Added red asterisk to label
   - Validation before proceeding to next category
   - Toast error if incomplete

2. **Previous Button in Assessment**
   - Navigate back through categories
   - Visible from 2nd category onwards
   - Auto-scroll to top on navigation

3. **DataRails Added to Skills**
   - Added under Fathom group in software questions
   - Updated migration: 111 skills total
   - Skill count validation updated

4. **Purpose Explanation in Invitation Email**
   - Blue info box: "Why We're Doing This"
   - Explains portal benefits and assessment purpose
   - Added to both API and email service

**Files Modified:**
- src/pages/team-portal/PublicAssessmentPage.tsx
- src/lib/api/invitations.ts
- src/lib/email-service.ts
- supabase/migrations/20251009_rpgcc_105_skills_complete.sql

---

## v1.0.7-REAL-FIX - React Hooks Fix (October 11, 2025 - 22:48)

### üêõ Critical Bug Fix: React Error #310

**Root Cause Found:**
- `useState` hook called AFTER conditional return statement
- Violated React's Rules of Hooks
- Line in AdvisorySkillsPage: `const [showManageTeam, setShowManageTeam] = useState(false);`

**Fix:**
- Moved ALL hooks to top of component
- Before any conditional logic or returns
- Re-enabled all component imports

**Result:** Error resolved! All tabs working! ‚úÖ

**Documentation:** THE_REAL_ROOT_CAUSE_V107.md

---

## v1.0.6 - Isolation Test (October 11, 2025 - 22:30)

### üî¨ Debugging Strategy

**Approach:**
- Disabled TeamMetrics tab completely
- Removed TabsTrigger and TabsContent
- Kept import to test if import itself causes error

**Result:** Error persisted with just import
**Conclusion:** TeamMetrics component has internal issue

**Documentation:** ISOLATING_THE_PROBLEM_V106.md

---

## v1.0.5 - Component Import Fix Attempt (October 11, 2025 - 22:15)

### üîß Attempted Fix

**Change:** Removed TeamMetrics import statement
**Reasoning:** Prevent problematic module from loading
**Result:** Still didn't resolve - deeper issue found

**Documentation:** THE_REAL_FIX_V105.md

---

## v1.0.4 - Skills Analysis & UI Improvements (October 11, 2025)

### ‚ú® Features

**Skills Analysis Tab:**
- Accordion layout by category
- Top Performers (level ‚â•3)
- High Interest Learners (level ‚â§2, interest ‚â•4)
- Mentoring opportunities count

**UI Improvements:**
- Wider member dialog (max-w-6xl)
- Scrollable content (max-h-[90vh])
- Interest level progress bars
- "Coming Soon" for training recommendations

**Team Management:**
- "Manage Team" button
- Delete team member dialog
- Calls deleteTeamMember API

**Files:** SKILLS_ANALYSIS_FEATURE.md, UI_UX_IMPROVEMENTS_SUMMARY.md

---

## v1.0.3 - CPD System (October 10, 2025)

### üìö CPD Tracker & Knowledge Base

**CPD Tracker:**
- Real-time data from Supabase
- Track hours, costs, learning objectives
- External resource links
- Member filtering

**Knowledge Base:**
- Document upload (CPD summaries, case studies, guides)
- Tags and search
- Member contributions tracking

**Files:** CPD_DEPLOYMENT_SUMMARY.md

---

## v1.0.2 - Team Management & Email Updates (October 10, 2025)

### üîß Critical Fixes

**Team Member Deletion:**
- UI: Manage Team dialog
- API: deleteTeamMember function
- SQL: SUPABASE_DELETE_TEAM_MEMBER.sql
- Cascading deletes for related data

**Admin Email Change:**
- Changed from jhoward@rpgcc.co.uk
- To: BSGBD@rpgcc.co.uk
- SQL: CHANGE_ADMIN_EMAIL.sql

**Invitations Page Fix:**
- Disabled RLS on invitation tables
- Fixed "Loading invitations..." stuck state
- SQL: FIX_INVITATIONS_LOADING.sql

**Files:** TEAM_MEMBER_MANAGEMENT_GUIDE.md, INVITATIONS_PAGE_FIX.md

---

## v1.0.1 - Initial Features (October 9, 2025)

### üéØ Core Functionality

**Skills Matrix:**
- Color legend (0-5 levels)
- Improved Succession Risk layout
- Expert names visible

**Gap Analysis:**
- Skills gap explanation
- Chart with legends
- Priority calculation documented

**Currency & Contrast:**
- Changed $ to ¬£ throughout
- Fixed assessment review contrast
- Removed mock data from metrics

**Files:** CURRENCY_AND_CONTRAST_FIXES.md, SKILLS_PRIORITY_ALGORITHM.md

---

## v1.0.0 - Initial Release (October 2025)

### üöÄ TORSOR Practice Platform Launch

**Core Features:**
- Skills assessment system
- Team invitations
- Advisory Skills tracking
- Practice dashboard
- 111 skills across 8 categories

**Technology Stack:**
- React + TypeScript
- Supabase (PostgreSQL)
- Vite
- Tailwind CSS
- Shadcn UI components
- Chart.js for visualizations

---

**Latest Version:** v1.2.0  
**Status:** Production Ready ‚úÖ  
**Deployment:** Railway (auto-deploy from GitHub)  
**Database:** Supabase (auto-migrate via GitHub Actions)
